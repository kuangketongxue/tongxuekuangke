<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>ç‹‚å®¢çš„ä¸»é¡µ</title>

  <!-- å­—ä½“ï¼ˆå¯æŒ‰éœ€è°ƒæ•´æˆ–å»æ‰ï¼‰ -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --brand:#00AEEC;
      --brand-deep:#0096ce;
      --text:#18191c;
      --text-2:#61666d;
      --text-3:#8a8f98;
      --line:#e3e5e7;
      --bg:#f6f7f8;
      --card:#fff;
      --radius:12px;
      --max:1320px; /* å®¹å™¨å®½åº¦ */
      --success:#22c55e;
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Noto Sans SC',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'PingFang SC','Microsoft YaHei',sans-serif;
      color:var(--text);
      background:var(--bg);
    }
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* é¡¶éƒ¨å¯¼èˆª */
    .nav{
      position:sticky;top:0;z-index:1000;
      backdrop-filter:saturate(120%) blur(8px);
      background:rgba(255,255,255,.92);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{
      max-width:var(--max);margin:0 auto;
      display:flex;align-items:center;gap:16px;
      padding:12px 16px;
    }
    .logo{
      display:flex;align-items:center;gap:8px;
      font-weight:700;color:var(--brand);
    }
    .logo-badge{
      width:28px;height:28px;border-radius:6px;
      background:var(--brand);display:grid;place-items:center;
      color:#fff;font-weight:700
    }
    .nav-links{
      display:flex;gap:14px;align-items:center;
      color:var(--text-2);font-size:14px
    }
    .nav-links a{padding:6px 8px;border-radius:6px}
    .nav-links a:hover{background:#f1f2f3}
    .search{
      flex:1;display:flex;align-items:center;gap:8px;
      background:#f1f2f3;border:1px solid var(--line);
      border-radius:999px;padding:8px 12px;
    }
    .search input{
      flex:1;border:none;outline:none;background:transparent;
      font-size:14px;color:var(--text)
    }
    .nav-right{
      display:flex;align-items:center;gap:12px
    }
    .icon-btn{
      width:36px;height:36px;border-radius:50%;
      display:grid;place-items:center;color:var(--text-2);
      border:1px solid var(--line);background:#fff;
      transition:.2s;
    }
    .icon-btn:hover{color:var(--brand);border-color:var(--brand)}
    .avatar-mini{
      width:36px;height:36px;border-radius:50%;
      background:#ddd;overflow:hidden;border:1px solid var(--line)
    }

    /* é¡¶éƒ¨å°é¢ */
    .cover{
      position:relative;
      height:220px;
      background:#cfd8e3 url('') center/cover no-repeat; /* TODO: æ›¿æ¢ä¸ºä½ çš„å°é¢å›¾ URL */
    }
    .cover::after{
      content:'';
      position:absolute;inset:0;
      background:linear-gradient(180deg,rgba(0,0,0,.15),rgba(0,0,0,.35));
    }

    /* ä¸ªäººä¿¡æ¯æ¡ */
    .profile-bar{
      position:relative;z-index:1;
      max-width:var(--max);margin:-42px auto 0;
      padding:0 16px 12px;
    }
    .profile-card{
      background:transparent;
      display:flex;align-items:flex-end;justify-content:space-between;
      gap:16px;
    }
    .profile-left{
      display:flex;align-items:flex-end;gap:16px
    }
    .avatar{
      width:88px;height:88px;border-radius:50%;
      border:3px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,.12);
      background:#e5e7eb url('') center/cover no-repeat; /* TODO: æ›¿æ¢ä¸ºä½ çš„å¤´åƒ URL */
    }
    .u-meta{
      display:flex;flex-direction:column;gap:6px;color:#fff
    }
    .u-name{
      display:flex;align-items:center;gap:8px;font-size:22px;font-weight:700
    }
    .u-level{
      padding:2px 6px;border-radius:6px;background:#fff;color:#ff7a45;
      font-weight:700;font-size:12px
    }
    .u-desc{font-size:13px;color:#eef0f3}
    .profile-actions{
      display:flex;align-items:center;gap:8px;margin-bottom:6px
    }
    .btn{
      height:36px;padding:0 14px;border-radius:8px;border:1px solid var(--line);
      display:inline-flex;align-items:center;gap:8px;background:#fff;color:var(--text);
      font-size:14px;transition:.2s;cursor:pointer;
    }
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn.primary:hover{background:var(--brand-deep)}
    .btn:hover{box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .u-stats{
      display:flex;gap:18px;margin-top:10px;color:#fff;font-size:13px
    }
    .u-stats b{font-size:16px;margin-right:4px}

    /* é€‰é¡¹å¡ */
    .tabs{
      max-width:var(--max);margin:18px auto 0;padding:0 16px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between;gap:16px
    }
    .tab-list{display:flex;gap:18px}
    .tab{
      position:relative;padding:12px 2px;color:var(--text-2);cursor:pointer;
      font-weight:500
    }
    .tab.active{color:var(--brand)}
    .tab.active::after{
      content:'';position:absolute;left:0;right:0;bottom:-1px;height:2px;background:var(--brand);
      border-radius:2px
    }
    .tab-search{
      width:280px;max-width:40%;
      display:flex;gap:8px;align-items:center;
      background:#f1f2f3;border:1px solid var(--line);border-radius:999px;padding:8px 12px
    }
    .tab-search input{flex:1;border:none;background:transparent;outline:none;font-size:14px}

    /* ä¸»ä½“åŒºåŸŸ */
    .page{
      max-width:var(--max);margin:18px auto 40px;padding:0 16px;
      display:grid;grid-template-columns:1fr 300px;gap:16px
    }

    /* å·¦ä¾§ - è§†é¢‘åŒº */
    .section-card{
      background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
      padding:14px;box-shadow:0 4px 14px rgba(0,0,0,.04)
    }
    .sec-header{
      display:flex;align-items:center;justify-content:space-between;margin-bottom:10px
    }
    .sec-title{font-size:18px;font-weight:700}
    .filter{
      display:flex;gap:8px;background:#f6f7f8;border-radius:999px;padding:4px
    }
    .chip{
      padding:6px 10px;border-radius:999px;font-size:13px;color:var(--text-2);cursor:pointer
    }
    .chip.active{background:#fff;border:1px solid var(--brand);color:var(--brand)}

    .video-grid{
      display:grid;gap:12px;
      grid-template-columns:repeat(5,1fr);
    }
    @media (max-width:1200px){
      .video-grid{grid-template-columns:repeat(4,1fr)}
    }
    @media (max-width:992px){
      .page{grid-template-columns:1fr}
      .video-grid{grid-template-columns:repeat(3,1fr)}
      .tab-search{max-width:none;width:220px}
    }
    @media (max-width:640px){
      .video-grid{grid-template-columns:repeat(2,1fr)}
      .u-stats{flex-wrap:wrap}
      .profile-actions{display:none}
    }

    .v-item{
      background:#fff;border:1px solid var(--line);border-radius:12px;overflow:hidden;
      transition:.2s;cursor:pointer
    }
    .v-item:hover{transform:translateY(-2px);box-shadow:0 8px 22px rgba(0,0,0,.08)}
    .v-thumb{
      position:relative;aspect-ratio:16/9;background:#dfe3e8 url('') center/cover no-repeat; /* TODO: é»˜è®¤å°é¢å ä½ï¼Œå¯åœ¨æ¯ä¸ªè§†é¢‘é¡¹è¦†ç›– */
    }
    .v-mask{
      position:absolute;inset:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.35));
      opacity:0;transition:.2s
    }
    .v-item:hover .v-mask{opacity:1}
    .v-duration{
      position:absolute;right:8px;bottom:8px;
      padding:2px 6px;border-radius:6px;background:rgba(0,0,0,.65);color:#fff;font-size:12px
    }
    .v-stats{
      position:absolute;left:8px;bottom:8px;display:flex;gap:10px;color:#fff;font-size:12px;opacity:.95
    }
    .v-info{padding:8px 10px}
    .v-title{
      font-size:14px;color:var(--text);line-height:1.4;height:40px;overflow:hidden;display:-webkit-box;
      -webkit-line-clamp:2;-webkit-box-orient:vertical;
    }
    .v-meta{margin-top:6px;color:var(--text-3);font-size:12px}

    /* å³ä¾§ - ä¾§è¾¹æ  */
    .aside-card{
      background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
      padding:14px;margin-bottom:12px;box-shadow:0 4px 14px rgba(0,0,0,.04)
    }
    .aside-title{font-weight:700;margin-bottom:10px}

    .charge{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .charge .btn{height:34px}

    .profile-box{display:grid;gap:8px;color:var(--text-2);font-size:14px}

    /* æ—¶é’Ÿå¡æ ·å¼ */
    .clock-box{display:grid;gap:6px;place-items:flex-start}
    .clock-time{
      font-size:32px;font-weight:700;letter-spacing:2px;color:var(--brand);
    }
    .clock-date{font-size:13px;color:var(--text-2)}

    /* å¤©æ°”å¡æ ·å¼ */
    .weather-box{display:grid;gap:8px}
    .weather-head{display:flex;align-items:center;gap:10px}
    .weather-icon{font-size:28px}
    .weather-sub{font-size:13px;color:var(--text-2)}
    .weather-detail{display:flex;gap:14px;color:var(--text-3);font-size:12px}

    /* ç•™è¨€å¼¹çª— */
    .message-modal{
      position:fixed;inset:0;
      background:rgba(0,0,0,.65);
      display:none;align-items:center;justify-content:center;
      z-index:2000;
    }
    .message-modal.active{display:flex}
    .message-container{
      background:#fff;border:1px solid var(--line);border-radius:16px;
      width:min(520px,92vw);max-height:88vh;overflow:auto;
      padding:20px 20px 16px;box-shadow:0 20px 60px rgba(0,0,0,.25);
      animation:modalIn .2s ease;
    }
    @keyframes modalIn{
      from{opacity:0;transform:translateY(10px) scale(.98)}
      to{opacity:1;transform:translateY(0) scale(1)}
    }
    .message-header{
      display:flex;align-items:center;justify-content:space-between;margin-bottom:10px
    }
    .message-title{font-size:18px;font-weight:700;color:var(--text)}
    .close-btn{
      width:34px;height:34px;border-radius:50%;
      display:grid;place-items:center;border:1px solid var(--line);cursor:pointer;background:#fff
    }
    .message-form{display:grid;gap:12px;margin-top:8px}
    .form-group{display:grid;gap:6px}
    .form-label{font-size:13px;color:var(--text-2)}
    .form-input,.form-textarea{
      width:100%;border:1px solid var(--line);border-radius:10px;background:#f9fafb;
      padding:10px 12px;font-size:14px;color:var(--text);outline:none;transition:.15s
    }
    .form-input:focus,.form-textarea:focus{
      background:#fff;border-color:var(--brand);box-shadow:0 0 0 3px rgba(0,174,236,.12)
    }
    .form-textarea{min-height:120px;resize:vertical;line-height:1.6}
    .char-count{text-align:right;font-size:12px;color:var(--text-3)}
    .submit-btn{
      height:38px;border-radius:10px;border:1px solid var(--brand);background:var(--brand);color:#fff;
      font-weight:700;letter-spacing:.5px;cursor:pointer
    }
    .submit-btn:disabled{opacity:.6;cursor:not-allowed}
    .status-message{
      margin-top:6px;padding:10px;border-radius:8px;font-size:13px;text-align:center;display:none
    }
    .status-message.show{display:block}
    .status-message.success{background:rgba(34,197,94,.12);color:var(--success);border:1px solid rgba(34,197,94,.35)}
    .status-message.error{background:rgba(239,68,68,.12);color:var(--danger);border:1px solid rgba(239,68,68,.35)}

    /* å³ä¸‹è§’ç•™è¨€å¿«æ·æŒ‰é’® */
    .float-chat{
      position:fixed;right:18px;bottom:18px;z-index:1000;
      width:54px;height:54px;border-radius:50%;
      background:var(--brand);color:#fff;display:grid;place-items:center;
      box-shadow:0 10px 24px rgba(0,174,236,.35);cursor:pointer
    }

    /* è¿”å›æ—§ç‰ˆæŒ‰é’®ï¼ˆè£…é¥°ï¼‰ */
    .old-btn{
      position:fixed;right:18px;bottom:86px;z-index:10;
      background:#fff;border:1px solid var(--line);border-radius:999px;padding:10px 14px;color:var(--text-2);
      box-shadow:0 6px 18px rgba(0,0,0,.08);font-size:14px
    }
  </style>
</head>
<body>

  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="nav">
    <div class="nav-inner">
      <div class="logo">
        <div class="logo-badge">B</div>
        <div>ä¸ªäººä¸»é¡µ</div>
      </div>
      <div class="nav-links">
        <a href="#">é¦–é¡µ</a>
        <a href="#">ç•ªå‰§</a>
        <a href="#">ç›´æ’­</a>
        <a href="#">æ¸¸æˆä¸­å¿ƒ</a>
        <a href="#">ä¼šå‘˜è´­</a>
        <a href="#">æ¼«ç”»</a>
        <a href="#">èµ›äº‹</a>
      </div>
      <div class="search">
        <span>ğŸ”</span>
        <input type="text" placeholder="æœç´¢ä½œå“ã€è§†é¢‘ã€åŠ¨æ€â€¦"/>
      </div>
      <div class="nav-right">
        <button class="icon-btn" title="å†å²">ğŸ•˜</button>
        <button class="icon-btn" title="æ¶ˆæ¯">ğŸ’¬</button>
        <button class="icon-btn" title="æŠ•ç¨¿">â¬†ï¸</button>
        <div class="avatar-mini" title="ç™»å½•/å¤´åƒ">
          <!-- TODO: ç™»å½•åå¯æ”¾å…¥ <img src="ä½ çš„å¤´åƒ"> -->
        </div>
      </div>
    </div>
  </nav>

  <!-- é¡¶éƒ¨å°é¢ï¼ˆå³ä¾§äººç‰©æ’ç”»å¯ç›´æ¥åšåœ¨å°é¢å›¾é‡Œï¼‰ -->
  <div class="cover"><!-- TODO: ä¿®æ”¹ .cover èƒŒæ™¯å›¾ URL --></div>

  <!-- ä¸ªäººä¿¡æ¯æ¡ -->
  <div class="profile-bar">
    <div class="profile-card">
      <div class="profile-left">
        <div class="avatar"><!-- TODO: ä¿®æ”¹ .avatar èƒŒæ™¯å›¾ URL --></div>
        <div class="u-meta">
          <div class="u-name">
            <!-- TODO: æ˜µç§° -->
            <span>ç‹‚å®¢åŒå­¦</span>
            <span class="u-level">LV5</span>
          </div>
          <!-- TODO: ä¸ªæ€§ç­¾å/ç®€ä»‹ -->
          <div class="u-desc">è¿™é‡Œæ˜¯ä¸ªæ€§ç­¾åï¼Œæ”¯æŒä¸€è¡Œç®€çŸ­æè¿°ï½</div>
          <div class="u-stats">
            <!-- TODO: å…³æ³¨/ç²‰ä¸/è·èµ/æ’­æ”¾æ•°æ® -->
            <div><b>0</b> å…³æ³¨æ•°</div>
            <div><b>0</b> ç²‰ä¸æ•°</div>
            <div><b>0</b> è·èµæ•°</div>
            <div><b>0</b> æ’­æ”¾æ•°</div>
          </div>
        </div>
      </div>
      <div class="profile-actions">
        <a class="btn primary">+ å…³æ³¨</a>
        <a class="btn">å‘æ¶ˆæ¯</a>
        <a class="btn" title="æ›´å¤š">â‹¯</a>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs">
    <div class="tab-list" id="tabList">
      <div class="tab active">ä¸»é¡µ</div>
      <div class="tab">åŠ¨æ€</div>
      <div class="tab">æŠ•ç¨¿</div>
      <div class="tab">åˆé›†</div>
    </div>
    <div class="tab-search">
      <span>ğŸ”</span>
      <input type="text" placeholder="æœç´¢è§†é¢‘ã€åŠ¨æ€"/>
    </div>
  </div>

  <!-- é¡µé¢ä¸»ä½“ -->
  <div class="page">
    <!-- å·¦ä¾§ï¼šè§†é¢‘åŒº -->
    <section class="section-card">
      <div class="sec-header">
        <div class="sec-title">è§†é¢‘ Â· <span style="color:var(--text-3);font-weight:400">å…± 0 ä¸ª</span><!-- TODO: æ•°é‡ --></div>
        <div class="filter" id="filterChips">
          <div class="chip active">æœ€æ–°å‘å¸ƒ</div>
          <div class="chip">æœ€å¤šæ’­æ”¾</div>
          <div class="chip">æœ€å¤šæ”¶è—</div>
        </div>
      </div>

      <div class="video-grid">
        <!-- æ¯ä¸ªè§†é¢‘é¡¹ï¼ˆå¤åˆ¶ç²˜è´´ä»¥è¡¥æ»¡ï¼‰ï¼Œä»…å ä½ã€‚TODOï¼šé€ä¸ªæ›¿æ¢å°é¢ã€æ ‡é¢˜ã€æ—¶é•¿ã€æ’­æ”¾/å¼¹å¹•/æ—¥æœŸ -->
        <article class="v-item">
          <div class="v-thumb" style="background-image:url('https://picsum.photos/seed/kv1/640/360')">
            <div class="v-mask"></div>
            <div class="v-stats"><span>â–¶ï¸ 0</span><span>ğŸ’¬ 0</span></div>
            <div class="v-duration">00:00</div>
          </div>
          <div class="v-info">
            <div class="v-title">è§†é¢‘æ ‡é¢˜å ä½ï¼ˆå¯ä¸¤è¡Œæ˜¾ç¤ºï¼Œè¶…å‡ºçœç•¥ï¼‰</div>
            <div class="v-meta">11-14 å‘å¸ƒ</div>
          </div>
        </article>

        <article class="v-item">
          <div class="v-thumb" style="background-image:url('https://picsum.photos/seed/kv2/640/360')">
            <div class="v-mask"></div>
            <div class="v-stats"><span>â–¶ï¸ 0</span><span>ğŸ’¬ 0</span></div>
            <div class="v-duration">00:00</div>
          </div>
          <div class="v-info">
            <div class="v-title">ç¬¬äºŒæ¡è§†é¢‘æ ‡é¢˜å ä½</div>
            <div class="v-meta">11-09 å‘å¸ƒ</div>
          </div>
        </article>

        <article class="v-item">
          <div class="v-thumb" style="background-image:url('https://picsum.photos/seed/kv3/640/360')">
            <div class="v-mask"></div>
            <div class="v-stats"><span>â–¶ï¸ 0</span><span>ğŸ’¬ 0</span></div>
            <div class="v-duration">00:00</div>
          </div>
          <div class="v-info">
            <div class="v-title">ç¬¬ä¸‰æ¡è§†é¢‘æ ‡é¢˜å ä½</div>
            <div class="v-meta">10-29 å‘å¸ƒ</div>
          </div>
        </article>

        <article class="v-item">
          <div class="v-thumb" style="background-image:url('https://picsum.photos/seed/kv4/640/360')">
            <div class="v-mask"></div>
            <div class="v-stats"><span>â–¶ï¸ 0</span><span>ğŸ’¬ 0</span></div>
            <div class="v-duration">00:00</div>
          </div>
          <div class="v-info">
            <div class="v-title">ç¬¬å››æ¡è§†é¢‘æ ‡é¢˜å ä½</div>
            <div class="v-meta">10-27 å‘å¸ƒ</div>
          </div>
        </article>

        <article class="v-item">
          <div class="v-thumb" style="background-image:url('https://picsum.photos/seed/kv5/640/360')">
            <div class="v-mask"></div>
            <div class="v-stats"><span>â–¶ï¸ 0</span><span>ğŸ’¬ 0</span></div>
            <div class="v-duration">00:00</div>
          </div>
          <div class="v-info">
            <div class="v-title">ç¬¬äº”æ¡è§†é¢‘æ ‡é¢˜å ä½</div>
            <div class="v-meta">10-23 å‘å¸ƒ</div>
          </div>
        </article>

        <!-- ç»§ç»­å¤åˆ¶æ›´å¤šå ä½å¡ç‰‡ ... -->
      </div>
    </section>

    <!-- å³ä¾§ï¼šä¾§è¾¹æ  -->
    <aside>
      <div class="aside-card">
        <div class="aside-title">å……ç”µ</div>
        <div class="charge">
          <div style="color:var(--text-2)">å·²æœ‰ <b>0</b> äººä¸ºTAå……ç”µ<!-- TODO: æ•°å­— --></div>
          <a class="btn primary">å»å……ç”µ âš¡</a>
        </div>
      </div>

      <div class="aside-card">
        <div class="aside-title">ç›´æ’­é—´</div>
        <div style="color:var(--text-2);font-size:14px">ä¸»æ’­ä¸åœ¨ï¼Œå¼€æ’­æ—¶ä¼šåœ¨åŠ¨æ€é€šçŸ¥ä½ å“¦ï½</div>
        <div style="margin-top:8px">
          <a class="btn">å‰å¾€TAçš„ç›´æ’­é—´</a>
        </div>
      </div>

      <div class="aside-card">
        <div class="aside-title">ä¸ªäººèµ„æ–™</div>
        <div class="profile-box">
          <!-- TODO: æŒ‰éœ€å¡«å†™ -->
          <div>UIDï¼šâ€”â€”</div>
          <div>æ³¨å†Œæ—¶é—´ï¼šâ€”â€”</div>
          <div>æ‰€åœ¨åœ°ï¼šâ€”â€”</div>
          <div>å…¶ä»–ï¼šâ€”â€”</div>
        </div>
      </div>

      <!-- ç°åœ¨æ—¶é—´ -->
      <div class="aside-card">
        <div class="aside-title">ç°åœ¨æ—¶é—´</div>
        <div class="clock-box">
          <div id="clockTime" class="clock-time">00:00:00</div>
          <div id="clockDate" class="clock-date">0000å¹´00æœˆ00æ—¥ æ˜ŸæœŸä¸€</div>
        </div>
      </div>

      <!-- å¤©æ°” -->
      <div class="aside-card">
        <div class="aside-title">å¤©æ°”</div>
        <div id="weatherBox" class="weather-box">
          <div class="weather-sub">æ­£åœ¨è·å–å¤©æ°”â€¦</div>
        </div>
      </div>

      <!-- ç•™è¨€å…¥å£ -->
      <div class="aside-card">
        <div class="aside-title">ç»™æˆ‘ç•™è¨€</div>
        <div style="color:var(--text-2);font-size:14px;margin-bottom:8px">
          æœ‰æƒ³è¯´çš„è¯æ¬¢è¿ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ä½ ï½
        </div>
        <button class="btn primary" onclick="openMessageModal()">æ‰“å¼€ç•™è¨€æ¡† âœ‰ï¸</button>
      </div>
    </aside>
  </div>

  <!-- è¿”å›æ—§ç‰ˆï¼ˆè£…é¥°ï¼‰ -->
  <a class="old-btn" href="javascript:void(0)">è¿”å›æ—§ç‰ˆ</a>

  <!-- æ‚¬æµ®ç•™è¨€æŒ‰é’® -->
  <div class="float-chat" title="ç•™è¨€" onclick="openMessageModal()">ğŸ’¬</div>

  <!-- ç•™è¨€å¼¹çª— -->
  <div class="message-modal" id="messageModal">
    <div class="message-container">
      <div class="message-header">
        <div class="message-title">ç»™æˆ‘ç•™è¨€</div>
        <div class="close-btn" onclick="closeMessageModal()">âœ•</div>
      </div>

      <form class="message-form" id="messageForm" onsubmit="submitMessage(event)">
        <div class="form-group">
          <label class="form-label">æ˜µç§° *</label>
          <input class="form-input" id="userName" type="text" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" required maxlength="20"/>
        </div>

        <div class="form-group">
          <label class="form-label">é‚®ç®±ï¼ˆé€‰å¡«ï¼‰</label>
          <input class="form-input" id="userEmail" type="email" placeholder="å¯é€‰ï¼Œå¡«å†™åä¾¿äºå›å¤"/>
        </div>

        <div class="form-group">
          <label class="form-label">ç•™è¨€å†…å®¹ *</label>
          <textarea class="form-textarea" id="messageContent" placeholder="å†™ä¸‹æ‚¨æƒ³è¯´çš„è¯â€¦" required maxlength="500"></textarea>
          <div class="char-count"><span id="charCount">0</span>/500</div>
        </div>

        <button class="submit-btn" id="submitBtn" type="submit"><span id="submitBtnText">ğŸ“¤ å‘é€ç•™è¨€</span></button>
        <div id="statusMessage" class="status-message"></div>
      </form>
    </div>
  </div>

  <script>
    // ========== é…ç½® ==========
    const CONFIG = {
      api: {
        submitUrl: '' // TODO: ç•™è¨€æäº¤æ¥å£ï¼Œå¦‚ '/api/submit-message'ï¼›ç•™ç©ºåˆ™æœ¬åœ°æ¨¡æ‹ŸæˆåŠŸ
      },
      qweather: {
        key: '' // TODO: å’Œé£å¤©æ°” Keyï¼›ç•™ç©ºåˆ™æ˜¾ç¤ºâ€œæœªé…ç½®â€
      },
      rateLimit: {
        cooldown: 60_000, // 60 ç§’
        maxLength: 500,
        minLength: 10
      }
    };

    // ========== å·¥å…· ==========
    function sanitizeInput(text){
      if(!text) return '';
      return text
        .replace(/<script[^>]*>.*?<\/script>/gi,'')
        .replace(/<iframe[^>]*>.*?<\/iframe>/gi,'')
        .replace(/<object[^>]*>.*?<\/object>/gi,'')
        .replace(/<embed[^>]*>.*?<\/embed>/gi,'')
        .replace(/on\w+\s*=\s*["'][^"']*["']/gi,'')
        .replace(/<[^>]+>/g,'')
        .trim();
    }
    function isValidEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }
    function showStatus(message,type){
      const el = document.getElementById('statusMessage');
      el.textContent = message;
      el.className = 'status-message show ' + (type==='success'?'success':'error');
    }
    function checkSubmitCooldown(){
      const last = localStorage.getItem('lastMessageSubmit');
      if(last){
        const passed = Date.now() - Number(last);
        if(passed < CONFIG.rateLimit.cooldown){
          const left = Math.ceil((CONFIG.rateLimit.cooldown - passed)/1000);
          showStatus(`â±ï¸ è¯·ç­‰å¾… ${left} ç§’åå†æ¬¡æäº¤`, 'error');
          return false;
        }
      }
      return true;
    }

    // ========== ç•™è¨€ ==========
    function openMessageModal(){
      document.getElementById('messageModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    function closeMessageModal(){
      document.getElementById('messageModal').classList.remove('active');
      document.body.style.overflow = '';
      document.getElementById('messageForm').reset();
      document.getElementById('charCount').textContent = '0';
      const el = document.getElementById('statusMessage');
      el.textContent = ''; el.className = 'status-message';
    }
    document.getElementById('messageModal').addEventListener('click',e=>{
      if(e.target === e.currentTarget) closeMessageModal();
    });
    document.addEventListener('keydown',e=>{
      if(e.key==='Escape') closeMessageModal();
    });
    document.getElementById('messageContent').addEventListener('input',()=>{
      const val = document.getElementById('messageContent').value;
      const count = val.length;
      document.getElementById('charCount').textContent = count;
    });

    async function submitMessage(e){
      e.preventDefault();
      const btn = document.getElementById('submitBtn');
      const btnText = document.getElementById('submitBtnText');
      if(btn.disabled) return;

      const userName = sanitizeInput(document.getElementById('userName').value);
      const userEmail = sanitizeInput(document.getElementById('userEmail').value);
      const messageContent = sanitizeInput(document.getElementById('messageContent').value);

      if(!userName || !messageContent){
        showStatus('âŒ è¯·å¡«å†™å¿…å¡«é¡¹', 'error'); return;
      }
      if(messageContent.length < CONFIG.rateLimit.minLength){
        showStatus(`âŒ ç•™è¨€å†…å®¹è‡³å°‘éœ€è¦ ${CONFIG.rateLimit.minLength} ä¸ªå­—ç¬¦`, 'error'); return;
      }
      if(messageContent.length > CONFIG.rateLimit.maxLength){
        showStatus(`âŒ ç•™è¨€å†…å®¹ä¸èƒ½è¶…è¿‡ ${CONFIG.rateLimit.maxLength} ä¸ªå­—ç¬¦`, 'error'); return;
      }
      if(userEmail && !isValidEmail(userEmail)){
        showStatus('âŒ é‚®ç®±æ ¼å¼ä¸æ­£ç¡®', 'error'); return;
      }
      if(!checkSubmitCooldown()) return;

      btn.disabled = true; btnText.textContent = 'ğŸ“® å‘é€ä¸­...';

      try{
        const payload = {
          userName,
          userEmail: userEmail || 'æœªæä¾›',
          messageContent,
          timestamp: new Date().toLocaleString('zh-CN',{hour12:false})
        };

        if(CONFIG.api.submitUrl){
          const res = await fetch(CONFIG.api.submitUrl,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify(payload)
          });
          if(!res.ok) throw new Error('æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
        }else{
          // æœ¬åœ°æ¨¡æ‹ŸæˆåŠŸ
          await new Promise(r=>setTimeout(r,700));
        }

        localStorage.setItem('lastMessageSubmit', Date.now().toString());
        showStatus('âœ¨ ç•™è¨€å‘é€æˆåŠŸï¼æ„Ÿè°¢æ‚¨çš„ç•™è¨€ï½', 'success');
        setTimeout(closeMessageModal, 1500);
      }catch(err){
        console.error('ç•™è¨€å‘é€å¤±è´¥:', err);
        showStatus(`âŒ ${err.message||'æäº¤å¤±è´¥'}`, 'error');
      }finally{
        btn.disabled = false; btnText.textContent = 'ğŸ“¤ å‘é€ç•™è¨€';
      }
    }

    // ========== æ—¶é’Ÿï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ ==========
    function updateClock(){
      const now = new Date();
      // ä½¿ç”¨æœ¬åœ°æ—¶é—´æ˜¾ç¤ºï¼Œè‹¥éœ€ä¸¥æ ¼åŒ—äº¬æ—¶é—´ï¼Œå¯ä½¿ç”¨ Intl æŒ‡å®šæ—¶åŒºåˆ†åˆ«æ ¼å¼åŒ–
      const y = new Intl.DateTimeFormat('zh-CN',{timeZone:'Asia/Shanghai',year:'numeric'}).format(now);
      const m = new Intl.DateTimeFormat('zh-CN',{timeZone:'Asia/Shanghai',month:'2-digit'}).format(now);
      const d = new Intl.DateTimeFormat('zh-CN',{timeZone:'Asia/Shanghai',day:'2-digit'}).format(now);
      const w = ['æ˜ŸæœŸæ—¥','æ˜ŸæœŸä¸€','æ˜ŸæœŸäºŒ','æ˜ŸæœŸä¸‰','æ˜ŸæœŸå››','æ˜ŸæœŸäº”','æ˜ŸæœŸå…­'][
        Number(new Intl.DateTimeFormat('zh-CN-u-ca-chinese',{timeZone:'Asia/Shanghai',weekday:'numeric'}).format(now)) % 7
      ] || ['æ˜ŸæœŸæ—¥','æ˜ŸæœŸä¸€','æ˜ŸæœŸäºŒ','æ˜ŸæœŸä¸‰','æ˜ŸæœŸå››','æ˜ŸæœŸäº”','æ˜ŸæœŸå…­'][new Date(now.toLocaleString('en-US',{timeZone:'Asia/Shanghai'})).getDay()];

      const timeParts = new Intl.DateTimeFormat('zh-CN',{
        timeZone:'Asia/Shanghai',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false
      }).formatToParts(now).reduce((acc,p)=>{acc[p.type]=p.value;return acc;}, {});
      const hh = timeParts.hour || '00';
      const mm = timeParts.minute || '00';
      const ss = timeParts.second || '00';

      document.getElementById('clockTime').textContent = `${hh}:${mm}:${ss}`;
      document.getElementById('clockDate').textContent = `${y}å¹´${m}æœˆ${d}æ—¥ ${w}`;
    }

    // ========== å¤©æ°”ï¼ˆå’Œé£ï¼‰ ==========
    const qweatherIcons = {
      '100':'â˜€ï¸','101':'â˜ï¸','102':'â›…','103':'â›…','104':'â˜ï¸',
      '150':'ğŸŒ™','151':'â˜ï¸','152':'â›…','153':'â›…',
      '300':'ğŸŒ¦ï¸','301':'â›ˆï¸','302':'âš¡','303':'â›ˆï¸','304':'â›ˆï¸',
      '305':'ğŸŒ§ï¸','306':'ğŸŒ§ï¸','307':'ğŸŒ§ï¸','308':'ğŸŒŠ','309':'ğŸ’§',
      '310':'â›ˆï¸','311':'â›ˆï¸','312':'â›ˆï¸','313':'ğŸŒ§ï¸',
      '400':'â„ï¸','401':'â„ï¸','402':'â„ï¸','403':'â„ï¸','404':'ğŸŒ¨ï¸',
      '500':'ğŸŒ«ï¸','501':'ğŸŒ«ï¸','502':'ğŸ˜·','503':'ğŸŒªï¸','504':'ğŸŒªï¸',
      '507':'ğŸŒªï¸','508':'ğŸŒªï¸','509':'ğŸŒ«ï¸','510':'ğŸŒ«ï¸',
      '900':'ğŸ”¥','901':'â„ï¸','999':'ğŸŒˆ'
    };
    function weatherIcon(code){ return qweatherIcons[code] || 'ğŸŒˆ'; }

    function renderWeatherLoading(msg='æ­£åœ¨è·å–å¤©æ°”â€¦'){
      const box = document.getElementById('weatherBox');
      box.innerHTML = `<div class="weather-sub">${msg}</div>`;
    }
    function renderWeatherError(msg='å¤©æ°”æ•°æ®è·å–å¤±è´¥'){
      const box = document.getElementById('weatherBox');
      box.innerHTML = `<div class="weather-sub">${msg}</div>`;
    }
    function renderWeather(data){
      const box = document.getElementById('weatherBox');
      const w = data.now;
      const icon = weatherIcon(w.icon);
      box.innerHTML = `
        <div class="weather-head">
          <div class="weather-icon">${icon}</div>
          <div>
            <div style="font-weight:700">${w.text} Â· ${w.temp}Â°C</div>
            <div class="weather-sub">ä½“æ„Ÿ ${w.feelsLike}Â°C Â· èƒ½è§åº¦ ${w.vis||'-'}km</div>
          </div>
        </div>
        <div class="weather-detail">
          <div>ğŸ’¨ ${w.windDir} ${w.windScale}çº§</div>
          <div>ğŸ’§ æ¹¿åº¦ ${w.humidity}%</div>
          <div>ğŸ§­ æ°”å‹ ${w.pressure||'-'}hPa</div>
        </div>
      `;
    }

    async function fetchQWeather(){
      const key = CONFIG.qweather.key;
      if(!key){ renderWeatherError('æœªé…ç½®å¤©æ°” Key'); return; }
      if(!('geolocation' in navigator)){
        renderWeatherError('æ— æ³•è·å–å®šä½æƒé™'); return;
      }
      renderWeatherLoading();
      navigator.geolocation.getCurrentPosition(async pos=>{
        try{
          const {latitude, longitude} = pos.coords;
          const loc = `${longitude.toFixed(2)},${latitude.toFixed(2)}`;
          const url = `https://devapi.qweather.com/v7/weather/now?location=${loc}&key=${encodeURIComponent(key)}&lang=zh`;
          const res = await fetch(url);
          if(!res.ok) throw new Error(`HTTP ${res.status}`);
          const data = await res.json();
          if(data && data.code==='200' && data.now){
            renderWeather(data);
          }else{
            renderWeatherError('å¤©æ°”è¿”å›å¼‚å¸¸');
          }
        }catch(err){
          console.error(err);
          renderWeatherError('å¤©æ°”è¯·æ±‚å¤±è´¥');
        }
      },err=>{
        console.error(err);
        renderWeatherError('å®šä½å¤±è´¥ï¼Œæ— æ³•è·å–å¤©æ°”');
      },{timeout:10000,enableHighAccuracy:false,maximumAge:300000});
    }

    // ========== äº¤äº’å¾®åŠ¨æ•ˆï¼ˆTabs/ç­›é€‰ï¼‰ ==========
    const tabList = document.getElementById('tabList');
    tabList.addEventListener('click', (e)=>{
      const t = e.target.closest('.tab');
      if(!t) return;
      [...tabList.children].forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
    });
    const chips = document.getElementById('filterChips');
    chips.addEventListener('click',(e)=>{
      const c = e.target.closest('.chip');
      if(!c) return;
      [...chips.children].forEach(x=>x.classList.remove('active'));
      c.classList.add('active');
    });

    // ========== å¯åŠ¨ ==========
    function boot(){
      updateClock();
      setInterval(updateClock,1000);
      fetchQWeather();
      setInterval(fetchQWeather, 15*60*1000); // 15 åˆ†é’Ÿ
    }
    window.addEventListener('load', boot);
  </script>
</body>
</html>
